System.register(["./index-legacy-DezzMsgm.js","./index-legacy-RIr0LYwX.js","./function-call-legacy-8TAp1X1u.js","./route-block-legacy-wdPIt6g0.js"],(function(e,t){"use strict";var n,r,o,a,i,u,l,c,s,f,d,v,p,g,y,h,b,m,O,j,w,S,P;return{setters:[e=>{n=e.d,r=e.M,o=e.N,a=e.x,i=e.O,u=e.h,l=e.r,c=e.y,s=e.j,f=e.P,d=e.v,v=e.z,p=e.A,g=e.H,y=e.a,h=e.Q,b=e.D,m=e.E,O=e.K,j=e._},e=>{w=e.B},e=>{S=e.s},e=>{P=e.b}],execute:function(){function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?k(Object(r),!0).forEach((function(n){t(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e){return function t(){for(var n=this,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return o.length>=e.length?e.apply(this,o):function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t.apply(n,[].concat(o,r))}}}function R(e){return{}.toString.call(e).includes("Object")}function V(e){return"function"==typeof e}var D=A((function(e,t){throw new Error(e[t]||e.default)}))({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),L={changes:function(e,t){return R(t)||D("changeType"),Object.keys(t).some((function(t){return n=e,r=t,!Object.prototype.hasOwnProperty.call(n,r);var n,r}))&&D("changeField"),t},selector:function(e){V(e)||D("selectorType")},handler:function(e){V(e)||R(e)||D("handlerType"),R(e)&&Object.values(e).some((function(e){return!V(e)}))&&D("handlersType")},initial:function(e){var t;e||D("initialIsRequired"),R(e)||D("initialType"),t=e,Object.keys(t).length||D("initialContent")}};function q(e,t){return V(t)?t(e.current):t}function C(e,t){return e.current=x(x({},e.current),t),t}function z(e,t,n){return V(t)?t(e.current):Object.keys(n).forEach((function(n){var r;return null===(r=t[n])||void 0===r?void 0:r.call(t,e.current[n])})),n}var F,N={create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};L.initial(e),L.handler(t);var n={current:e},r=A(z)(n,t),o=A(C)(n),a=A(L.changes)(e),i=A(q)(n);return[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return L.selector(e),e(n.current)},function(e){!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}}(r,o,a,i)(e)}]}},B={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "},U=(F=function(e,t){throw new Error(e[t]||e.default)},function e(){for(var t=this,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return r.length>=F.length?F.apply(this,r):function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e.apply(t,[].concat(r,o))}})(B),W={config:function(e){var t;return e||U("configIsRequired"),t=e,{}.toString.call(t).includes("Object")||U("configType"),e.urls?(console.warn(B.deprecation),{paths:{vs:e.urls.monacoBase}}):e}};function $(e,t){return Object.keys(t).forEach((function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],$(e[n],t[n]))})),I(I({},e),t)}var H={type:"cancelation",msg:"operation is manually canceled"};function J(e){var t=!1,n=new Promise((function(n,r){e.then((function(e){return t?r(H):n(e)})),e.catch(r)}));return n.cancel=function(){return t=!0},n}var K,Q,Y=N.create({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}),G=(Q=2,function(e){if(Array.isArray(e))return e}(K=Y)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(l){o=!0,a=l}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}}(K,Q)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(K,Q)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),X=G[0],Z=G[1];function ee(e){return document.body.appendChild(e)}function te(e){var t,n,r=X((function(e){return{config:e.config,reject:e.reject}})),o=(t="".concat(r.config.paths.vs,"/loader.js"),n=document.createElement("script"),t&&(n.src=t),n);return o.onload=function(){return e()},o.onerror=r.reject,o}function ne(){var e=X((function(e){return{config:e.config,resolve:e.resolve,reject:e.reject}})),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],(function(t){re(t),e.resolve(t)}),(function(t){e.reject(t)}))}function re(e){X().monaco||Z({monaco:e})}var oe=new Promise((function(e,t){return Z({resolve:e,reject:t})})),ae={config:function(e){var t=W.config(e),n=t.monaco,r=M(t,["monaco"]);Z((function(e){return{config:$(e.config,r),monaco:n}}))},init:function(){var e=X((function(e){return{monaco:e.monaco,isInitialized:e.isInitialized,resolve:e.resolve}}));if(!e.isInitialized){if(Z({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),J(oe);if(window.monaco&&window.monaco.editor)return re(window.monaco),e.resolve(window.monaco),J(oe);!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}}(ee,te)(ne)}return J(oe)},__getMonacoInstance:function(){return X((function(e){return e.monaco}))}},ie=Object.defineProperty,ue=Object.defineProperties,le=Object.getOwnPropertyDescriptors,ce=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,de=(e,t,n)=>t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ve=(e,t)=>{for(var n in t||(t={}))se.call(t,n)&&de(e,n,t[n]);if(ce)for(var n of ce(t))fe.call(t,n)&&de(e,n,t[n]);return e};const pe={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}};function ge(e,t){return{wrapperStyle:a((()=>{const{width:t,height:n}=e;return r=ve({},pe.wrapper),ue(r,le({width:t,height:n}));var r})),containerStyle:a((()=>ve(ve({},pe.fullWidth),!t.value&&pe.hide)))}}function ye(e){return"function"==typeof e?e():e}function he(e){return void 0===e}function be(e,t,n,r){return function(e,t){return e.editor.getModel(me(e,t))}(e,r)||function(e,t,n,r){return e.editor.createModel(t,n,r?me(e,r):void 0)}(e,t,n,r)}function me(e,t){return e.Uri.parse(t)}var Oe=Object.defineProperty,je=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable,Pe=(e,t,n)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const ke={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};var Ie=n({name:"VueMonacoEditor",model:{prop:"value",event:"update:value"},props:{defaultValue:String,defaultPath:String,defaultLanguage:String,value:String,language:String,path:String,theme:{type:String,default:"vs"},line:Number,options:{type:Object,default:()=>({})},overrideServices:{type:Object,default:()=>({})},saveViewState:{type:Boolean,default:!0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},className:String},emits:["update:value","beforeMount","mount","change","validate"],setup(e,t){const n=new Map,r=o(null),{monacoRef:f,unload:d,isLoadFailed:v}=function(){const e=o(ae.__getMonacoInstance()),t=l(!1);let n;return c((()=>{e.value||(n=ae.init(),n.then((t=>e.value=t)).catch((e=>{"cancelation"!==(null==e?void 0:e.type)&&(t.value=!0,console.error("Monaco initialization error:",e))})))})),{monacoRef:e,unload:()=>null==n?void 0:n.cancel(),isLoadFailed:t}}(),{editorRef:p}=function({emit:e},t,n,r){const a=o(null);function i(){var o;if(!r.value||!n.value||a.value)return;e("beforeMount",n.value);const i=t.path||t.defaultPath,u=be(n.value,t.value||t.defaultValue||"",t.language||t.defaultLanguage||"",i||"");a.value=n.value.editor.create(r.value,((e,t)=>{for(var n in t||(t={}))we.call(t,n)&&Pe(e,n,t[n]);if(je)for(var n of je(t))Se.call(t,n)&&Pe(e,n,t[n]);return e})({model:u,theme:t.theme,automaticLayout:!0,autoIndent:"brackets",formatOnPaste:!0,formatOnType:!0},t.options),t.overrideServices),null==(o=a.value)||o.onDidChangeModelContent((n=>{const r=a.value.getValue();r!==t.value&&(e("update:value",r),e("change",r,n))})),a.value&&!he(t.line)&&a.value.revealLine(t.line),e("mount",a.value,n.value)}return c((()=>{const e=u(n,(()=>{r.value&&n.value&&(s((()=>e())),i())}),{immediate:!0})})),{editorRef:a}}(t,e,f,r),{disposeValidator:g}=function({emit:e},t,n,r){const o=l(null),a=u([n,r],(()=>{if(n.value&&r.value){s((()=>a()));const t=n.value.editor.onDidChangeMarkers((t=>{var o,a;const i=null==(a=null==(o=r.value)?void 0:o.getModel())?void 0:a.uri;if(i&&t.find((e=>e.path===i.path))){const t=n.value.editor.getModelMarkers({resource:i});e("validate",t)}}));o.value=()=>null==t?void 0:t.dispose()}}));return{disposeValidator:o}}(t,0,f,p),y=a((()=>!!f.value&&!!p.value)),{wrapperStyle:h,containerStyle:b}=ge(e,y);return i((()=>{var e,t;null==(e=g.value)||e.call(g),p.value?(null==(t=p.value.getModel())||t.dispose(),p.value.dispose()):d()})),u([()=>e.path,()=>e.value,()=>e.language,()=>e.line],(([t,r,o,a],[i,u,l,c])=>{if(y.value){if(t!==i){const u=be(f.value,r||e.defaultValue||"",o||e.defaultLanguage||"",t||e.defaultPath||"");return e.saveViewState&&n.set(i,p.value.saveViewState()),p.value.setModel(u),e.saveViewState&&p.value.restoreViewState(n.get(t)),void(he(a)||p.value.revealLine(a))}p.value.getValue()!==r&&p.value.setValue(r),o!==l&&f.value.editor.setModelLanguage(p.value.getModel(),o),he(a)||a===c||p.value.revealLine(a)}})),u((()=>e.options),(e=>p.value&&p.value.updateOptions(e)),{deep:!0}),u((()=>e.theme),(e=>f.value&&f.value.editor.setTheme(e))),{containerRef:r,isEditorReady:y,isLoadFailed:v,wrapperStyle:h,containerStyle:b}},render(){const{$slots:e,isEditorReady:t,isLoadFailed:n,wrapperStyle:o,containerStyle:a,className:i}=this;return r("div",{style:o},[!t&&r("div",{style:ke},n?e.failure?ye(e.failure):"load failed":e.default?ye(e.default):"loading..."),r("div",{ref:"containerRef",key:"monaco_editor_container",style:a,class:i})])}});const Me={class:"config-edit-page"},Te={class:"editor-container"},Ee={class:"footer"},_e=n({__name:"index",setup(e){const t=f(),n=d(),r=l(t.query.device?JSON.parse(t.query.device):{}),o=l(""),a=l(!1),i=l(0);async function u(){if(r.value?.imei){a.value=!0;try{(await O.post("/executeTask",{imei:r.value.imei,task:"set_config",configText:o.value})).success?(S("保存成功"),n.back()):S("保存失败")}catch{S("保存失败")}finally{a.value=!1}}}return async function(){if(r.value?.imei){a.value=!0;try{const e=await O.post("/executeTask",{imei:r.value.imei,task:"get_config"});e.success?o.value=e.result||"":S("获取配置失败")}catch{S("获取配置失败")}finally{a.value=!1,i.value=2}}}(),(e,t)=>{const n=w;return p(),v("div",Me,[g("div",Te,[y(h(Ie),{value:o.value,"onUpdate:value":t[0]||(t[0]=e=>o.value=e),language:"lua",theme:"vs-dark",options:{fontSize:14}},null,8,["value"])]),g("div",Ee,[y(n,{block:"",type:"primary",loading:a.value,onClick:u},{default:b((()=>t[1]||(t[1]=[m(" 保存配置 ")]))),_:1,__:[1]},8,["loading"])])])}}});"function"==typeof P&&P(_e),e("default",j(_e,[["__scopeId","data-v-80ad867a"]]))}}}));
